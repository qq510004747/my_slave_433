; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--c99 --list --split_sections --debug -c --asm --interleave -o.\obj\sx1276.o --asm_dir=.\List\ --list_dir=.\List\ --depend=.\obj\sx1276.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I..\Libraries\CMSIS\CM3\CoreSupport -I..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\Libraries\J_LINK_RTT\RTT -I..\User -I..\BSP\BSP -I..\BSP\BSP_InPut -I..\BSP\BSP_OutPut -I..\BSP\BSP_FLASH -I..\BSP\BSP_USART -I..\Libraries\FreeRTOS -I..\Libraries\FreeRTOS\include -I..\Libraries\FreeRTOS\FreeRTOSConfig -I..\Libraries\FreeRTOS\portable\RVDS\ARM_CM3 -I..\BSP\OLED -I..\BSP -I..\BSP\OLED -I..\BSP\TIMER3 -I..\BSP\BSP_Switch -I..\BSP\BSP_USART1 -I..\BSP\BSP_Internet\W5500 -I..\BSP\SX1278\radio -I..\BSP\SX1278\platform\sx12xxEiger -I..\BSP\SX1278\platform -I..\BSP\apps -I..\BSP\BSP_FIFO -I..\BSP\crc -I..\BSP\ADC -I..\BSP\BSP_USART3 -I..\BSP\E31radio_driver -I..\BSP\TIMER2 -I..\BSP\BSP_USART2 -I.\RTE\_STM32F10x________2.0.0 -IE:\keil\Keil\STM32F1xx_DFP\2.2.0\Device\Include -IE:\keil\ARM\CMSIS\Include -D__MICROLIB -D__UVISION_VERSION=525 -DSTM32F10X_HD -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER --omf_browse=.\obj\sx1276.crf ..\BSP\SX1278\radio\sx1276.c]
                          THUMB

                          AREA ||i.SX1276GetLoRaOn||, CODE, READONLY, ALIGN=2

                  SX1276GetLoRaOn PROC
;;;173    
;;;174    bool SX1276GetLoRaOn( void )
000000  4801              LDR      r0,|L1.8|
;;;175    {
;;;176        return LoRaOn;
000002  7800              LDRB     r0,[r0,#0]  ; LoRaOn
;;;177    }
000004  4770              BX       lr
;;;178    
                          ENDP

000006  0000              DCW      0x0000
                  |L1.8|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetOpMode||, CODE, READONLY, ALIGN=2

                  SX1276GetOpMode PROC
;;;190    
;;;191    uint8_t SX1276GetOpMode( void )
000000  b510              PUSH     {r4,lr}
;;;192    {
;;;193        if( LoRaOn == false )
000002  4804              LDR      r0,|L2.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L2.14|
;;;194        {
;;;195            return SX1276FskGetOpMode( );
000008  f7fffffe          BL       SX1276FskGetOpMode
                  |L2.12|
;;;196        }
;;;197        else
;;;198        {
;;;199            return SX1276LoRaGetOpMode( );
;;;200        }
;;;201    }
00000c  bd10              POP      {r4,pc}
                  |L2.14|
00000e  f7fffffe          BL       SX1276LoRaGetOpMode
000012  e7fb              B        |L2.12|
;;;202    
                          ENDP

                  |L2.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetPacketAfc||, CODE, READONLY, ALIGN=2

                  SX1276GetPacketAfc PROC
;;;266    
;;;267    uint32_t SX1276GetPacketAfc( void )
000000  b510              PUSH     {r4,lr}
;;;268    {
;;;269        if( LoRaOn == false )
000002  4804              LDR      r0,|L3.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L3.14|
;;;270        {
;;;271            return SX1276FskGetPacketAfc(  );
000008  f7fffffe          BL       SX1276FskGetPacketAfc
;;;272        }
;;;273        else
;;;274        {
;;;275             while( 1 )
;;;276             {
;;;277                 // Useless in LoRa mode
;;;278                 // Block program here
;;;279             }
;;;280        }
;;;281    }
00000c  bd10              POP      {r4,pc}
                  |L3.14|
00000e  bf00              NOP                            ;275
                  |L3.16|
000010  e7fe              B        |L3.16|
;;;282    
                          ENDP

000012  0000              DCW      0x0000
                  |L3.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetPacketRssi||, CODE, READONLY, ALIGN=2

                  SX1276GetPacketRssi PROC
;;;254    
;;;255    double SX1276GetPacketRssi( void )
000000  b510              PUSH     {r4,lr}
;;;256    {
;;;257        if( LoRaOn == false )
000002  4804              LDR      r0,|L4.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L4.14|
;;;258        {
;;;259            return SX1276FskGetPacketRssi(  );
000008  f7fffffe          BL       SX1276FskGetPacketRssi
                  |L4.12|
;;;260        }
;;;261        else
;;;262        {
;;;263            return SX1276LoRaGetPacketRssi( );
;;;264        }
;;;265    }
00000c  bd10              POP      {r4,pc}
                  |L4.14|
00000e  f7fffffe          BL       SX1276LoRaGetPacketRssi
000012  e7fb              B        |L4.12|
;;;266    
                          ENDP

                  |L4.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetPacketRxGain||, CODE, READONLY, ALIGN=2

                  SX1276GetPacketRxGain PROC
;;;226    
;;;227    uint8_t SX1276GetPacketRxGain( void )
000000  b510              PUSH     {r4,lr}
;;;228    {
;;;229        if( LoRaOn == false )
000002  4804              LDR      r0,|L5.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L5.14|
;;;230        {
;;;231            return SX1276FskGetPacketRxGain(  );
000008  f7fffffe          BL       SX1276FskGetPacketRxGain
                  |L5.12|
;;;232        }
;;;233        else
;;;234        {
;;;235            return SX1276LoRaGetPacketRxGain(  );
;;;236        }
;;;237    }
00000c  bd10              POP      {r4,pc}
                  |L5.14|
00000e  f7fffffe          BL       SX1276LoRaGetPacketRxGain
000012  e7fb              B        |L5.12|
;;;238    
                          ENDP

                  |L5.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetPacketSnr||, CODE, READONLY, ALIGN=2

                  SX1276GetPacketSnr PROC
;;;238    
;;;239    int8_t SX1276GetPacketSnr( void )
000000  b510              PUSH     {r4,lr}
;;;240    {
;;;241        if( LoRaOn == false )
000002  4804              LDR      r0,|L6.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b908              CBNZ     r0,|L6.12|
;;;242        {
;;;243             while( 1 )
000008  bf00              NOP      
                  |L6.10|
00000a  e7fe              B        |L6.10|
                  |L6.12|
;;;244             {
;;;245                 // Useless in FSK mode
;;;246                 // Block program here
;;;247             }
;;;248        }
;;;249        else
;;;250        {
;;;251            return SX1276LoRaGetPacketSnr(  );
00000c  f7fffffe          BL       SX1276LoRaGetPacketSnr
;;;252        }
;;;253    }
000010  bd10              POP      {r4,pc}
;;;254    
                          ENDP

000012  0000              DCW      0x0000
                  |L6.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetRFState||, CODE, READONLY, ALIGN=2

                  SX1276GetRFState PROC
;;;318    
;;;319    uint8_t SX1276GetRFState( void )
000000  b510              PUSH     {r4,lr}
;;;320    {
;;;321        if( LoRaOn == false )
000002  4804              LDR      r0,|L7.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L7.14|
;;;322        {
;;;323            return SX1276FskGetRFState( );
000008  f7fffffe          BL       SX1276FskGetRFState
                  |L7.12|
;;;324        }
;;;325        else
;;;326        {
;;;327            return SX1276LoRaGetRFState( );
;;;328        }
;;;329    }
00000c  bd10              POP      {r4,pc}
                  |L7.14|
00000e  f7fffffe          BL       SX1276LoRaGetRFState
000012  e7fb              B        |L7.12|
;;;330    
                          ENDP

                  |L7.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276GetRxPacket||, CODE, READONLY, ALIGN=2

                  SX1276GetRxPacket PROC
;;;294    
;;;295    void SX1276GetRxPacket( void *buffer, uint16_t *size )
000000  b570              PUSH     {r4-r6,lr}
;;;296    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;297        if( LoRaOn == false )
000006  4806              LDR      r0,|L8.32|
000008  7800              LDRB     r0,[r0,#0]  ; LoRaOn
00000a  b920              CBNZ     r0,|L8.22|
;;;298        {
;;;299            SX1276FskGetRxPacket( buffer, size );
00000c  4629              MOV      r1,r5
00000e  4620              MOV      r0,r4
000010  f7fffffe          BL       SX1276FskGetRxPacket
000014  e003              B        |L8.30|
                  |L8.22|
;;;300        }
;;;301        else
;;;302        {
;;;303            SX1276LoRaGetRxPacket( buffer, size );
000016  4629              MOV      r1,r5
000018  4620              MOV      r0,r4
00001a  f7fffffe          BL       SX1276LoRaGetRxPacket
                  |L8.30|
;;;304        }
;;;305    }
00001e  bd70              POP      {r4-r6,pc}
;;;306    
                          ENDP

                  |L8.32|
                          DCD      LoRaOn

                          AREA ||i.SX1276Init||, CODE, READONLY, ALIGN=2

                  SX1276Init PROC
;;;39     
;;;40     void SX1276Init( void )
000000  b508              PUSH     {r3,lr}
;;;41     {
;;;42     	uint8_t TempReg;
;;;43     	
;;;44         // Initialize FSK and LoRa registers structure
;;;45         SX1276 = ( tSX1276* )SX1276Regs;
000002  4811              LDR      r0,|L9.72|
000004  4911              LDR      r1,|L9.76|
000006  6008              STR      r0,[r1,#0]  ; SX1276
;;;46         SX1276LR = ( tSX1276LR* )SX1276Regs;
000008  4911              LDR      r1,|L9.80|
00000a  6008              STR      r0,[r1,#0]  ; SX1276LR
;;;47     
;;;48         SX1276InitIo( );
00000c  f7fffffe          BL       SX1276InitIo
;;;49         
;;;50         SX1276Reset( );
000010  f7fffffe          BL       SX1276Reset
;;;51     	
;;;52     	// for test hard spi
;;;53     	 SX1276Read(0x06,&TempReg);
000014  4669              MOV      r1,sp
000016  2006              MOVS     r0,#6
000018  f7fffffe          BL       SX1276Read
;;;54     	 while(TempReg != 0x6C)
00001c  e005              B        |L9.42|
                  |L9.30|
;;;55     	 {
;;;56     		 printf("Hard SPI Err!\r\n");
00001e  a00d              ADR      r0,|L9.84|
000020  f7fffffe          BL       __2printf
;;;57     		 Soft_delay_ms(100);
000024  2064              MOVS     r0,#0x64
000026  f7fffffe          BL       Soft_delay_ms
                  |L9.42|
00002a  f89d0000          LDRB     r0,[sp,#0]            ;54
00002e  286c              CMP      r0,#0x6c              ;54
000030  d1f5              BNE      |L9.30|
;;;58     	 }
;;;59     
;;;60         // REMARK: After radio reset the default modem is FSK
;;;61     
;;;62     #if ( LORA == 0 )           //LORA = 1
;;;63     
;;;64         LoRaOn = false;
;;;65         SX1276SetLoRaOn( LoRaOn );
;;;66         // Initialize FSK modem
;;;67         SX1276FskInit( );
;;;68     
;;;69     #else
;;;70     
;;;71         LoRaOn = true;          //LORA = 1
000032  2001              MOVS     r0,#1
000034  490b              LDR      r1,|L9.100|
000036  7008              STRB     r0,[r1,#0]
;;;72         SX1276SetLoRaOn( LoRaOn );
000038  4608              MOV      r0,r1
00003a  7800              LDRB     r0,[r0,#0]  ; LoRaOn
00003c  f7fffffe          BL       SX1276SetLoRaOn
;;;73         // Initialize LoRa modem
;;;74         SX1276LoRaInit( );
000040  f7fffffe          BL       SX1276LoRaInit
;;;75         
;;;76     #endif
;;;77     
;;;78     }
000044  bd08              POP      {r3,pc}
;;;79     
                          ENDP

000046  0000              DCW      0x0000
                  |L9.72|
                          DCD      SX1276Regs
                  |L9.76|
                          DCD      SX1276
                  |L9.80|
                          DCD      SX1276LR
                  |L9.84|
000054  48617264          DCB      "Hard SPI Err!\r\n",0
000058  20535049
00005c  20457272
000060  210d0a00
                  |L9.100|
                          DCD      LoRaOn

                          AREA ||i.SX1276Process||, CODE, READONLY, ALIGN=2

                  SX1276Process PROC
;;;342    
;;;343    uint32_t SX1276Process( void )
000000  b510              PUSH     {r4,lr}
;;;344    {
;;;345        if( LoRaOn == false )
000002  4804              LDR      r0,|L10.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L10.14|
;;;346        {
;;;347            return SX1276FskProcess( );
000008  f7fffffe          BL       SX1276FskProcess
                  |L10.12|
;;;348        }
;;;349        else
;;;350        {
;;;351            return SX1276LoRaProcess( );
;;;352        }
;;;353    }
00000c  bd10              POP      {r4,pc}
                  |L10.14|
00000e  f7fffffe          BL       SX1276LoRaProcess
000012  e7fb              B        |L10.12|
;;;354    
                          ENDP

                  |L10.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276ReadRssi||, CODE, READONLY, ALIGN=2

                  SX1276ReadRssi PROC
;;;202    
;;;203    double SX1276ReadRssi( void )
000000  b510              PUSH     {r4,lr}
;;;204    {
;;;205        if( LoRaOn == false )
000002  4804              LDR      r0,|L11.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L11.14|
;;;206        {
;;;207            return SX1276FskReadRssi( );
000008  f7fffffe          BL       SX1276FskReadRssi
                  |L11.12|
;;;208        }
;;;209        else
;;;210        {
;;;211            return SX1276LoRaReadRssi( );
;;;212        }
;;;213    }
00000c  bd10              POP      {r4,pc}
                  |L11.14|
00000e  f7fffffe          BL       SX1276LoRaReadRssi
000012  e7fb              B        |L11.12|
;;;214    
                          ENDP

                  |L11.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276ReadRxGain||, CODE, READONLY, ALIGN=2

                  SX1276ReadRxGain PROC
;;;214    
;;;215    uint8_t SX1276ReadRxGain( void )
000000  b510              PUSH     {r4,lr}
;;;216    {
;;;217        if( LoRaOn == false )
000002  4804              LDR      r0,|L12.20|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b910              CBNZ     r0,|L12.14|
;;;218        {
;;;219            return SX1276FskReadRxGain( );
000008  f7fffffe          BL       SX1276FskReadRxGain
                  |L12.12|
;;;220        }
;;;221        else
;;;222        {
;;;223            return SX1276LoRaReadRxGain( );
;;;224        }
;;;225    }
00000c  bd10              POP      {r4,pc}
                  |L12.14|
00000e  f7fffffe          BL       SX1276LoRaReadRxGain
000012  e7fb              B        |L12.12|
;;;226    
                          ENDP

                  |L12.20|
                          DCD      LoRaOn

                          AREA ||i.SX1276Reset||, CODE, READONLY, ALIGN=2

                  SX1276Reset PROC
;;;79     
;;;80     void SX1276Reset( void )
000000  b510              PUSH     {r4,lr}
;;;81     {
;;;82     //	uint32_t startTick;  
;;;83     
;;;84     //	SX1276SetReset( RADIO_RESET_ON );
;;;85     
;;;86     //    startTick = GET_TICK_COUNT( );
;;;87     
;;;88     
;;;89     //    while( ( GET_TICK_COUNT( ) - startTick ) < TICK_RATE_MS( 1 ) );
;;;90     
;;;91     //    SX1276SetReset( RADIO_RESET_OFF );
;;;92     
;;;93     //    // Wait 6ms
;;;94     //    startTick = GET_TICK_COUNT( );
;;;95     ////printf("%d\r\n",GET_TICK_COUNT());
;;;96     //    while( ( GET_TICK_COUNT( ) - startTick ) < TICK_RATE_MS( 6) );    
;;;97     //printf("%d\r\n",GET_TICK_COUNT());
;;;98     	
;;;99     //	    uint32_t startTick;
;;;100    //	
;;;101    //		SX1276SetReset( RADIO_RESET_ON );
;;;102    //    
;;;103    //    // Wait 1ms
;;;104    //    startTick = GET_TICK_COUNT( );
;;;105    //	printf("%d\n",GET_TICK_COUNT());
;;;106    //    while( ( GET_TICK_COUNT( ) - startTick ) < TICK_RATE_MS( 1 ) );    
;;;107    //printf("%d\n",GET_TICK_COUNT());
;;;108    //    SX1276SetReset( RADIO_RESET_OFF );
;;;109    //    printf("%d\n",GET_TICK_COUNT());
;;;110    //    // Wait 6ms
;;;111    //    startTick = GET_TICK_COUNT( );
;;;112    //	printf("%d\n",GET_TICK_COUNT());
;;;113    //    while( ( GET_TICK_COUNT( ) - startTick ) < TICK_RATE_MS( 6 ) );   
;;;114    //	printf("%d\n",GET_TICK_COUNT());
;;;115    
;;;116    
;;;117    
;;;118    	uint32_t startTick;  
;;;119    
;;;120    	SX1276SetReset( RADIO_RESET_ON );
000002  2001              MOVS     r0,#1
000004  f7fffffe          BL       SX1276SetReset
;;;121        
;;;122        // Wait 1ms
;;;123        startTick = GET_TICK_COUNT( );
000008  4809              LDR      r0,|L13.48|
00000a  6804              LDR      r4,[r0,#0]  ; TickCounter
;;;124        while( ( GET_TICK_COUNT( ) - startTick ) < TICK_RATE_MS( 1 ) );    
00000c  bf00              NOP      
                  |L13.14|
00000e  4808              LDR      r0,|L13.48|
000010  6800              LDR      r0,[r0,#0]  ; TickCounter
000012  1b00              SUBS     r0,r0,r4
000014  d0fb              BEQ      |L13.14|
;;;125    
;;;126        SX1276SetReset( RADIO_RESET_OFF );
000016  2000              MOVS     r0,#0
000018  f7fffffe          BL       SX1276SetReset
;;;127        
;;;128        // Wait 6ms
;;;129        startTick = GET_TICK_COUNT( );
00001c  4804              LDR      r0,|L13.48|
00001e  6804              LDR      r4,[r0,#0]  ; TickCounter
;;;130        while( ( GET_TICK_COUNT( ) - startTick ) < TICK_RATE_MS( 6 ) );  
000020  bf00              NOP      
                  |L13.34|
000022  4803              LDR      r0,|L13.48|
000024  6800              LDR      r0,[r0,#0]  ; TickCounter
000026  1b00              SUBS     r0,r0,r4
000028  2806              CMP      r0,#6
00002a  d3fa              BCC      |L13.34|
;;;131    #ifdef DebugMode	
;;;132    	printf("sx1278 init ok! GET_TICK_COUNT %d\n",GET_TICK_COUNT());
;;;133    	#endif
;;;134    }
00002c  bd10              POP      {r4,pc}
;;;135    
                          ENDP

00002e  0000              DCW      0x0000
                  |L13.48|
                          DCD      TickCounter

                          AREA ||i.SX1276SetLoRaOn||, CODE, READONLY, ALIGN=2

                  SX1276SetLoRaOn PROC
;;;135    
;;;136    void SX1276SetLoRaOn( bool enable )
000000  b510              PUSH     {r4,lr}
;;;137    {
000002  4604              MOV      r4,r0
;;;138        if( LoRaOnState == enable )
000004  4829              LDR      r0,|L14.172|
000006  7800              LDRB     r0,[r0,#0]  ; LoRaOnState
000008  42a0              CMP      r0,r4
00000a  d100              BNE      |L14.14|
                  |L14.12|
;;;139        {
;;;140            return;
;;;141        }
;;;142        LoRaOnState = enable;
;;;143        LoRaOn = enable;
;;;144    
;;;145        if( LoRaOn == true )
;;;146        {
;;;147            SX1276LoRaSetOpMode( RFLR_OPMODE_SLEEP );
;;;148            
;;;149            SX1276LR->RegOpMode = ( SX1276LR->RegOpMode & RFLR_OPMODE_LONGRANGEMODE_MASK ) | RFLR_OPMODE_LONGRANGEMODE_ON;// 
;;;150            SX1276Write( REG_LR_OPMODE, SX1276LR->RegOpMode );
;;;151            
;;;152            SX1276LoRaSetOpMode( RFLR_OPMODE_STANDBY );
;;;153                                            // RxDone               RxTimeout                   FhssChangeChannel           CadDone
;;;154            SX1276LR->RegDioMapping1 = RFLR_DIOMAPPING1_DIO0_00 | RFLR_DIOMAPPING1_DIO1_00 | RFLR_DIOMAPPING1_DIO2_00 | RFLR_DIOMAPPING1_DIO3_00;
;;;155                                            // CadDetected          ModeReady
;;;156            SX1276LR->RegDioMapping2 = RFLR_DIOMAPPING2_DIO4_00 | RFLR_DIOMAPPING2_DIO5_00;
;;;157            SX1276WriteBuffer( REG_LR_DIOMAPPING1, &SX1276LR->RegDioMapping1, 2 );
;;;158            
;;;159            SX1276ReadBuffer( REG_LR_OPMODE, SX1276Regs + 1, 0x70 - 1 );
;;;160        }
;;;161        else
;;;162        {
;;;163            SX1276LoRaSetOpMode( RFLR_OPMODE_SLEEP );
;;;164            
;;;165            SX1276LR->RegOpMode = ( SX1276LR->RegOpMode & RFLR_OPMODE_LONGRANGEMODE_MASK ) | RFLR_OPMODE_LONGRANGEMODE_OFF;
;;;166            SX1276Write( REG_LR_OPMODE, SX1276LR->RegOpMode );
;;;167            
;;;168            SX1276LoRaSetOpMode( RFLR_OPMODE_STANDBY );
;;;169            
;;;170            SX1276ReadBuffer( REG_OPMODE, SX1276Regs + 1, 0x70 - 1 );
;;;171        }
;;;172    }
00000c  bd10              POP      {r4,pc}
                  |L14.14|
00000e  4827              LDR      r0,|L14.172|
000010  7004              STRB     r4,[r0,#0]            ;142
000012  4827              LDR      r0,|L14.176|
000014  7004              STRB     r4,[r0,#0]            ;143
000016  7800              LDRB     r0,[r0,#0]            ;145  ; LoRaOn
000018  2801              CMP      r0,#1                 ;145
00001a  d12b              BNE      |L14.116|
00001c  2000              MOVS     r0,#0                 ;147
00001e  f7fffffe          BL       SX1276LoRaSetOpMode
000022  4824              LDR      r0,|L14.180|
000024  6800              LDR      r0,[r0,#0]            ;149  ; SX1276LR
000026  7840              LDRB     r0,[r0,#1]            ;149
000028  f000007f          AND      r0,r0,#0x7f           ;149
00002c  f0400080          ORR      r0,r0,#0x80           ;149
000030  4920              LDR      r1,|L14.180|
000032  6809              LDR      r1,[r1,#0]            ;149  ; SX1276LR
000034  7048              STRB     r0,[r1,#1]            ;149
000036  481f              LDR      r0,|L14.180|
000038  6800              LDR      r0,[r0,#0]            ;150  ; SX1276LR
00003a  7841              LDRB     r1,[r0,#1]            ;150
00003c  2001              MOVS     r0,#1                 ;150
00003e  f7fffffe          BL       SX1276Write
000042  2001              MOVS     r0,#1                 ;152
000044  f7fffffe          BL       SX1276LoRaSetOpMode
000048  2000              MOVS     r0,#0                 ;154
00004a  491a              LDR      r1,|L14.180|
00004c  6809              LDR      r1,[r1,#0]            ;154  ; SX1276LR
00004e  f881003f          STRB     r0,[r1,#0x3f]         ;154
000052  4918              LDR      r1,|L14.180|
000054  6809              LDR      r1,[r1,#0]            ;156  ; SX1276LR
000056  f8810040          STRB     r0,[r1,#0x40]         ;156
00005a  2202              MOVS     r2,#2                 ;157
00005c  4815              LDR      r0,|L14.180|
00005e  6801              LDR      r1,[r0,#0]            ;157  ; SX1276LR
000060  313f              ADDS     r1,r1,#0x3f           ;157
000062  2040              MOVS     r0,#0x40              ;157
000064  f7fffffe          BL       SX1276WriteBuffer
000068  226f              MOVS     r2,#0x6f              ;159
00006a  4913              LDR      r1,|L14.184|
00006c  2001              MOVS     r0,#1                 ;159
00006e  f7fffffe          BL       SX1276ReadBuffer
000072  e018              B        |L14.166|
                  |L14.116|
000074  2000              MOVS     r0,#0                 ;163
000076  f7fffffe          BL       SX1276LoRaSetOpMode
00007a  480e              LDR      r0,|L14.180|
00007c  6800              LDR      r0,[r0,#0]            ;165  ; SX1276LR
00007e  7840              LDRB     r0,[r0,#1]            ;165
000080  f000007f          AND      r0,r0,#0x7f           ;165
000084  490b              LDR      r1,|L14.180|
000086  6809              LDR      r1,[r1,#0]            ;165  ; SX1276LR
000088  7048              STRB     r0,[r1,#1]            ;165
00008a  480a              LDR      r0,|L14.180|
00008c  6800              LDR      r0,[r0,#0]            ;166  ; SX1276LR
00008e  7841              LDRB     r1,[r0,#1]            ;166
000090  2001              MOVS     r0,#1                 ;166
000092  f7fffffe          BL       SX1276Write
000096  2001              MOVS     r0,#1                 ;168
000098  f7fffffe          BL       SX1276LoRaSetOpMode
00009c  226f              MOVS     r2,#0x6f              ;170
00009e  4906              LDR      r1,|L14.184|
0000a0  2001              MOVS     r0,#1                 ;170
0000a2  f7fffffe          BL       SX1276ReadBuffer
                  |L14.166|
0000a6  bf00              NOP      
0000a8  e7b0              B        |L14.12|
;;;173    
                          ENDP

0000aa  0000              DCW      0x0000
                  |L14.172|
                          DCD      LoRaOnState
                  |L14.176|
                          DCD      LoRaOn
                  |L14.180|
                          DCD      SX1276LR
                  |L14.184|
                          DCD      SX1276Regs+0x1

                          AREA ||i.SX1276SetOpMode||, CODE, READONLY, ALIGN=2

                  SX1276SetOpMode PROC
;;;178    
;;;179    void SX1276SetOpMode( uint8_t opMode )
000000  b510              PUSH     {r4,lr}
;;;180    {
000002  4604              MOV      r4,r0
;;;181        if( LoRaOn == false )
000004  4805              LDR      r0,|L15.28|
000006  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000008  b918              CBNZ     r0,|L15.18|
;;;182        {
;;;183            SX1276FskSetOpMode( opMode );
00000a  4620              MOV      r0,r4
00000c  f7fffffe          BL       SX1276FskSetOpMode
000010  e002              B        |L15.24|
                  |L15.18|
;;;184        }
;;;185        else
;;;186        {
;;;187            SX1276LoRaSetOpMode( opMode );
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       SX1276LoRaSetOpMode
                  |L15.24|
;;;188        }
;;;189    }
000018  bd10              POP      {r4,pc}
;;;190    
                          ENDP

00001a  0000              DCW      0x0000
                  |L15.28|
                          DCD      LoRaOn

                          AREA ||i.SX1276SetRFState||, CODE, READONLY, ALIGN=2

                  SX1276SetRFState PROC
;;;330    
;;;331    void SX1276SetRFState( uint8_t state )
000000  b510              PUSH     {r4,lr}
;;;332    {
000002  4604              MOV      r4,r0
;;;333        if( LoRaOn == false )
000004  4805              LDR      r0,|L16.28|
000006  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000008  b918              CBNZ     r0,|L16.18|
;;;334        {
;;;335            SX1276FskSetRFState( state );
00000a  4620              MOV      r0,r4
00000c  f7fffffe          BL       SX1276FskSetRFState
000010  e002              B        |L16.24|
                  |L16.18|
;;;336        }
;;;337        else
;;;338        {
;;;339            SX1276LoRaSetRFState( state );
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       SX1276LoRaSetRFState
                  |L16.24|
;;;340        }
;;;341    }
000018  bd10              POP      {r4,pc}
;;;342    
                          ENDP

00001a  0000              DCW      0x0000
                  |L16.28|
                          DCD      LoRaOn

                          AREA ||i.SX1276SetTxPacket||, CODE, READONLY, ALIGN=2

                  SX1276SetTxPacket PROC
;;;306    
;;;307    void SX1276SetTxPacket( const void *buffer, uint16_t size )
000000  b570              PUSH     {r4-r6,lr}
;;;308    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;309        if( LoRaOn == false )
000006  4806              LDR      r0,|L17.32|
000008  7800              LDRB     r0,[r0,#0]  ; LoRaOn
00000a  b920              CBNZ     r0,|L17.22|
;;;310        {
;;;311            SX1276FskSetTxPacket( buffer, size );
00000c  4629              MOV      r1,r5
00000e  4620              MOV      r0,r4
000010  f7fffffe          BL       SX1276FskSetTxPacket
000014  e003              B        |L17.30|
                  |L17.22|
;;;312        }
;;;313        else
;;;314        {
;;;315            SX1276LoRaSetTxPacket( buffer, size );
000016  4629              MOV      r1,r5
000018  4620              MOV      r0,r4
00001a  f7fffffe          BL       SX1276LoRaSetTxPacket
                  |L17.30|
;;;316        }
;;;317    }
00001e  bd70              POP      {r4-r6,pc}
;;;318    
                          ENDP

                  |L17.32|
                          DCD      LoRaOn

                          AREA ||i.SX1276StartRx||, CODE, READONLY, ALIGN=2

                  SX1276StartRx PROC
;;;282    
;;;283    void SX1276StartRx( void )
000000  b510              PUSH     {r4,lr}
;;;284    {
;;;285        if( LoRaOn == false )
000002  4805              LDR      r0,|L18.24|
000004  7800              LDRB     r0,[r0,#0]  ; LoRaOn
000006  b918              CBNZ     r0,|L18.16|
;;;286        {
;;;287            SX1276FskSetRFState( RF_STATE_RX_INIT );
000008  2001              MOVS     r0,#1
00000a  f7fffffe          BL       SX1276FskSetRFState
00000e  e002              B        |L18.22|
                  |L18.16|
;;;288        }
;;;289        else
;;;290        {
;;;291            SX1276LoRaSetRFState( RFLR_STATE_RX_INIT );    //LoRa ÖÐ¶Ï½ÓÊÕ×´Ì¬
000010  2001              MOVS     r0,#1
000012  f7fffffe          BL       SX1276LoRaSetRFState
                  |L18.22|
;;;292        }
;;;293    }
000016  bd10              POP      {r4,pc}
;;;294    
                          ENDP

                  |L18.24|
                          DCD      LoRaOn

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  SX1276Regs
                          %        112

                          AREA ||.data||, DATA, ALIGN=0

                  LoRaOn
000000  00                DCB      0x00
                  LoRaOnState
000001  00                DCB      0x00
